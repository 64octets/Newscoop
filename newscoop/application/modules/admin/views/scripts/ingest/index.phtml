<?php $this->placeholder('title')->set('News Desk'); ?>

<div class="ingest"><div class="control"><div class="w">

<h2><?php putGS('Feeds'); ?></h2>
<ul class="feeds">
    <?php /*
    <li><a href="<?php echo $this->url(array(
            'action' => 'index',
            'feed' => null
        )); ?>" title="Switch feed"><?php echo getGS('All'); ?></a>
    </li>
     */ ?>
    <?php foreach ($this->feeds as $feed) { ?>
    <li><a href="<?php echo $this->url(array(
            'action' => 'index',
            'feed' => $feed->getId(),
        )); ?>" title="Switch feed"><?php echo $feed->getName(); ?></a>
        (<?php putGS('updated'); ?> <?php echo $feed->getUpdated() ? $feed->getUpdated()->format('H:i') : getGS('Never'); ?>)
    </li>
    <?php /*
    <li>
        <a href="<?php echo $this->url(array(
            'action' => 'switch-mode',
            'feed' => $feed->getId(),
        )); ?>" title="Switch mode"><?php echo $feed->isAutoMode() ? getGS('Automatic') : getGS('Manual'); ?></a>
    </li>
    */ ?>
    <?php } ?>

    <li class="add"><a href="<?php echo $this->url(array(
        'action' => 'add-feed',
    )); ?>">Add feed</a></li>
</ul>

</div></div><div class="main"><div class="w">

<ul class="items">
    <?php foreach ($this->items as $item) { ?>
    <li class="<?php echo $item->getItemMeta()->getItemClass(); ?>">
        <span class="created"><?php echo $item->getItemMeta()->getFirstCreated()->format('d/m H:i'); ?></span>
        <h3><?php echo $item->getContentMeta()->getHeadline(); ?></h3>
        <address>by <?php echo $item->getItemMeta()->getProvider(); ?></address>
        <?php if ($item instanceof \Newscoop\News\PackageItem) { ?>
            <?php $this->renderPackageItem($item); ?>
        <?php } else { ?>
            <?php $this->renderNewsItem($item); ?>
        <?php } ?>
    </li>
    <?php } // /foreach ?>
</ul>

</div></div></div>

<script>
$(function() {
    $('.items h3 a').fancybox({
        hideOnContentClick: false
    });
});
</script>

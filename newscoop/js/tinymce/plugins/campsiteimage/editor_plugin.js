(function(){tinymce.PluginManager.requireLangPack("campsiteimage");tinymce.create("tinymce.plugins.campsiteimage",{init:function(a,e){this.editor=a;editorId=typeof a.settings.fullscreen_editor_id!="undefined"?a.settings.fullscreen_editor_id:a.editorId;articleNo=editorId.substring(editorId.lastIndexOf("_")+1);a.addCommand("mcecampsiteimage",function(){var b=a.selection,c="";if(!b.isCollapsed()||a.dom.getParent(b.getNode(),"IMG")){var d="";b=b.getNode();b=a.dom.getParent(b,"IMG");if(b!=null&&b.nodeName==
"IMG")d="update";if(d=="update"){d=a.dom.getAttrib(b,"id");c="&image_id="+d;if(a.dom.getAttrib(b,"alt")!==null)c+="&image_alt="+encodeURIComponent(a.dom.getAttrib(b,"alt"));if(a.dom.getAttrib(b,"title")!==null)c+="&image_title="+encodeURIComponent(a.dom.getAttrib(b,"title"));if(a.dom.getAttrib(b,"align")!==null)c+="&image_alignment="+escape(a.dom.getAttrib(b,"align"));if(a.dom.getAttrib(b,"width")!==null&&a.dom.getAttrib(b,"width")!="")c+="&image_resize_width="+escape(a.dom.getAttrib(b,"width"));
if(a.dom.getAttrib(b,"height")!==null&&a.dom.getAttrib(b,"height")!="")c+="&image_resize_height="+escape(a.dom.getAttrib(b,"height"));if(a.dom.getAttrib(b,"ratio")!==null&&a.dom.getAttrib(b,"ratio")!="")c+="&image_ratio="+escape(a.dom.getAttrib(b,"ratio"));else if(d.lastIndexOf("_")>0)c+="&image_ratio="+d.substring(d.lastIndexOf("_")+1)}}a.windowManager.open({file:e+"/popup.php?article_id="+articleNo+c,width:580+parseInt(a.getLang("campsiteimage.delta_width",0)),height:430+parseInt(a.getLang("campsiteimage.delta_height",
0)),inline:1},{plugin_url:e})});a.addButton("campsiteimage",{title:"campsiteimage.campsiteimage_desc",cmd:"mcecampsiteimage",image:e+"/img/campsiteimage.gif"});a.addShortcut("ctrl+g","campsiteimage.campsiteimage_desc","mcecampsiteimage");a.onNodeChange.add(function(b,c,d,f){c.setDisabled("link",f&&d.nodeName!="A");c.setActive("link",d.nodeName=="A"&&!d.name)})},getInfo:function(){return{longname:"campsiteimage",author:"Sourcefabric",authorurl:"http://www.sourcefabric.org",infourl:"http://dev.sourcefabric.org/browse/CS",
version:"3.4"}}});tinymce.PluginManager.add("campsiteimage",tinymce.plugins.campsiteimage)})();

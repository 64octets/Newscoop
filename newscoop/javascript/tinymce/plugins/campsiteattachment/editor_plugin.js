(function(){tinymce.PluginManager.requireLangPack("campsiteattachment");tinymce.create("tinymce.plugins.campsiteattachment",{init:function(a,d){this.editor=a;editorId=a.id;articleNo=editorId.substring(editorId.lastIndexOf("_")+1);topDoc=window.top.document;langId=topDoc.getElementById("f_language_selected").value;a.addCommand("mcecampsiteattachment",function(){var b=a.selection;if(b.isCollapsed()&&!a.dom.getParent(b.getNode(),"A"))alert(a.getLang("campsiteattachment.select_to_link"));else{var c="";
b=b.getNode();b=a.dom.getParent(b,"A");if(b!=null&&b.nodeName=="A")c="update";c=="update"&&a.dom.getAttrib(b,"href");a.windowManager.open({file:d+"/popup.php?article_id="+articleNo+"&language_selected="+langId,width:580+parseInt(a.getLang("campsiteattachment.delta_width",0)),height:330+parseInt(a.getLang("campsiteattachment.delta_height",0)),inline:1},{plugin_url:d})}});a.addButton("campsiteattachment",{title:"campsiteattachment.campsiteattachment_desc",cmd:"mcecampsiteattachment",image:d+"/img/newscoopattachment.gif"});
a.addShortcut("ctrl+h","campsiteattachment.campsiteattachment_desc","mcecampsiteattachment");a.onNodeChange.add(function(b,c,e,f){c.setDisabled("link",f&&e.nodeName!="A");c.setActive("link",e.nodeName=="A"&&!e.name)})},getInfo:function(){return{longname:"campsiteattachment",author:"Sourcefabric",authorurl:"http://www.sourcefabric.org",infourl:"http://dev.sourcefabric.org/browse/CS",version:"3.2"}}});tinymce.PluginManager.add("campsiteattachment",tinymce.plugins.campsiteattachment)})();
